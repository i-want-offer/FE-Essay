(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{337:function(t,v,_){"use strict";_.r(v);var l=_(6),e=Object(l.a)({},(function(){var t=this,v=t.$createElement,_=t._self._c||v;return _("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[_("h1",{attrs:{id:"重排与重绘"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#重排与重绘"}},[t._v("#")]),t._v(" 重排与重绘")]),t._v(" "),_("blockquote",[_("p",[t._v("当元素的样式发生变化时，浏览器需要触发更新，重新绘制元素。这个过程中，有两种类型的操作，即重绘与重排")])]),t._v(" "),_("h2",{attrs:{id:"重排-reflow"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#重排-reflow"}},[t._v("#")]),t._v(" 重排（reflow）")]),t._v(" "),_("blockquote",[_("p",[t._v("当元素的尺寸、结构或触发某些属性时，浏览器会重新渲染页面，称之为 "),_("strong",[t._v("重排")]),t._v("，此时，浏览器需要重新经过计算，计算后还需要重新布局页面，所以是比较重的操作")])]),t._v(" "),_("p",[t._v("会触发重排的操作：")]),t._v(" "),_("ul",[_("li",[t._v("页面首次渲染")]),t._v(" "),_("li",[t._v("浏览器窗口大小改变")]),t._v(" "),_("li",[t._v("元素尺寸、位置、内容发生改变")]),t._v(" "),_("li",[t._v("元素字体大小变化")]),t._v(" "),_("li",[t._v("添加或删除可见的 dom 元素")]),t._v(" "),_("li",[t._v("激活 CSS 伪类（例如：hover）")]),t._v(" "),_("li",[t._v("查询某些属性或调用某些方法\n"),_("ul",[_("li",[t._v("clientWidth、clientHeight、clientTop、clientLeft")]),t._v(" "),_("li",[t._v("offsetWidth、offsetHeight、offsetTop、offsetLeft")]),t._v(" "),_("li",[t._v("scrollWidth、scrollHeight、scrollTop、scrollLeft")]),t._v(" "),_("li",[t._v("getComputedStyle()")]),t._v(" "),_("li",[t._v("getBoundingClientRect()")]),t._v(" "),_("li",[t._v("scrollTo")])])])]),t._v(" "),_("h2",{attrs:{id:"重绘-repaint"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#重绘-repaint"}},[t._v("#")]),t._v(" 重绘（repaint）")]),t._v(" "),_("blockquote",[_("p",[t._v("当元素样式的改变不影响布局时，浏览器会使用重绘对元素进行升级，由于此时只需要 UI 层面的重新像素绘制，因此损耗较小")])]),t._v(" "),_("h2",{attrs:{id:"如何避免触发重排和重绘"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#如何避免触发重排和重绘"}},[t._v("#")]),t._v(" 如何避免触发重排和重绘")]),t._v(" "),_("blockquote",[_("p",[t._v("重排必会触发重绘，重绘不一定触发重排。重排代价较高，重绘开销较小")])]),t._v(" "),_("ul",[_("li",[_("p",[t._v("CSS")]),t._v(" "),_("ul",[_("li",[t._v("避免使用 table 布局")]),t._v(" "),_("li",[t._v("尽可能在 DOM 树的最末端改变 class")]),t._v(" "),_("li",[t._v("避免使用多层内联样式")]),t._v(" "),_("li",[t._v("避免使用 CSS 表达式（如：calc()）")]),t._v(" "),_("li",[t._v("将动画效果应用到 position 属性为 absolute 或 fixed 的元素上")]),t._v(" "),_("li",[t._v("CSS3 硬件加速（GPU 加速）")])])]),t._v(" "),_("li",[_("p",[t._v("javascript")]),t._v(" "),_("ul",[_("li",[t._v("避免频繁操作样式，可以汇总后统一 "),_("strong",[t._v("一次修改")])]),t._v(" "),_("li",[t._v("尽量使用 class 进行样式修改")]),t._v(" "),_("li",[t._v("减少 dom 的增删次数，可以使用字符串或者 documentFragment 一次性插入")]),t._v(" "),_("li",[t._v("极限优化时，可以将其样式修改为 "),_("code",[t._v("display: none")]),t._v(" 后修改")]),t._v(" "),_("li",[t._v("避免多次触发上面提到的那些会触发重排的方法，尽量用 "),_("strong",[t._v("变量存储")])]),t._v(" "),_("li",[t._v("对具有复杂动画的元素使用绝对定位，使其脱离文档流，否则会引起父元素及后续元素频繁回流")])])])])])}),[],!1,null,null,null);v.default=e.exports}}]);